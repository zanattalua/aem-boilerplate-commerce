/*! Copyright 2025 Adobe
All Rights Reserved. */
import{merge as a}from"@dropins/tools/lib.js";import{c as ee}from"./productSearch.js";const ne=e=>{var o,i,r,l,s,c,m,f,u,y,v,R,k,w,_,x,b,C,D,K,P,T,A,O,V,z,I,S,j,q,B,E,F,G,H,J,N,Q,U,W,X,Y,Z,$,M,L,h,g,t;if(!e)return{id:"",name:"",sku:"",shortDescription:"",url:"",urlKey:"",metaTitle:"",metaKeywords:"",metaDescription:"",lowStock:!1,links:[],images:[],description:"",externalId:"",inputOptions:[],addToCartAllowed:!1,price:void 0,priceRange:void 0,inStock:!1,typename:""};const n={id:(e==null?void 0:e.id)||"",name:(e==null?void 0:e.name)||"",sku:(e==null?void 0:e.sku)||"",shortDescription:(e==null?void 0:e.shortDescription)||"",url:(e==null?void 0:e.url)||"",urlKey:(e==null?void 0:e.urlKey)||"",metaTitle:(e==null?void 0:e.metaTitle)||"",metaKeywords:(e==null?void 0:e.metaKeywords)||"",metaDescription:(e==null?void 0:e.metaDescription)||"",lowStock:(e==null?void 0:e.lowStock)||!1,links:(e==null?void 0:e.links)||[],images:((o=e==null?void 0:e.images)==null?void 0:o.map(p=>{var d;return{label:p.label||"",roles:p.roles||[],url:((d=p.url)==null?void 0:d.replace(/^https?:\/\//,"//"))||""}}))||[],description:(e==null?void 0:e.description)||"",externalId:(e==null?void 0:e.externalId)||"",inputOptions:(e==null?void 0:e.inputOptions)||[],addToCartAllowed:(e==null?void 0:e.addToCartAllowed)||!1,price:e.price?{final:{amount:{value:((l=(r=(i=e==null?void 0:e.price)==null?void 0:i.final)==null?void 0:r.amount)==null?void 0:l.value)||0,currency:((m=(c=(s=e==null?void 0:e.price)==null?void 0:s.final)==null?void 0:c.amount)==null?void 0:m.currency)||""}},regular:{amount:{value:((y=(u=(f=e==null?void 0:e.price)==null?void 0:f.regular)==null?void 0:u.amount)==null?void 0:y.value)||0,currency:((k=(R=(v=e==null?void 0:e.price)==null?void 0:v.regular)==null?void 0:R.amount)==null?void 0:k.currency)||""}},roles:((w=e==null?void 0:e.price)==null?void 0:w.roles)||[]}:void 0,priceRange:e!=null&&e.priceRange?{minimum:{final:{amount:{value:((C=(b=(x=(_=e==null?void 0:e.priceRange)==null?void 0:_.minimum)==null?void 0:x.final)==null?void 0:b.amount)==null?void 0:C.value)||0,currency:((T=(P=(K=(D=e==null?void 0:e.priceRange)==null?void 0:D.minimum)==null?void 0:K.final)==null?void 0:P.amount)==null?void 0:T.currency)||""}},regular:{amount:{value:((z=(V=(O=(A=e==null?void 0:e.priceRange)==null?void 0:A.minimum)==null?void 0:O.regular)==null?void 0:V.amount)==null?void 0:z.value)||0,currency:((q=(j=(S=(I=e==null?void 0:e.priceRange)==null?void 0:I.minimum)==null?void 0:S.regular)==null?void 0:j.amount)==null?void 0:q.currency)||""}}},maximum:{final:{amount:{value:((G=(F=(E=(B=e==null?void 0:e.priceRange)==null?void 0:B.maximum)==null?void 0:E.final)==null?void 0:F.amount)==null?void 0:G.value)||0,currency:((Q=(N=(J=(H=e==null?void 0:e.priceRange)==null?void 0:H.maximum)==null?void 0:J.final)==null?void 0:N.amount)==null?void 0:Q.currency)||""}},regular:{amount:{value:((Y=(X=(W=(U=e==null?void 0:e.priceRange)==null?void 0:U.maximum)==null?void 0:W.regular)==null?void 0:X.amount)==null?void 0:Y.value)||0,currency:((L=(M=($=(Z=e==null?void 0:e.priceRange)==null?void 0:Z.maximum)==null?void 0:$.regular)==null?void 0:M.amount)==null?void 0:L.currency)||""}}}}:void 0,inStock:(e==null?void 0:e.inStock)||!1,typename:(e==null?void 0:e.__typename)||""};return a(n,(t=(g=(h=ee.getConfig().models)==null?void 0:h.Product)==null?void 0:g.transformer)==null?void 0:t.call(g,e))};function oe(e){var i,r,l,s,c,m,f;const n=e==null?void 0:e.productSearch,o={facets:(n==null?void 0:n.facets)||[],items:(n==null?void 0:n.items.map(u=>ne(u==null?void 0:u.productView)))||[],pageInfo:{currentPage:((i=n==null?void 0:n.page_info)==null?void 0:i.current_page)||1,totalPages:((r=n==null?void 0:n.page_info)==null?void 0:r.total_pages)||1,totalItems:((l=n==null?void 0:n.page_info)==null?void 0:l.total_items)||0,pageSize:((s=n==null?void 0:n.page_info)==null?void 0:s.page_size)||10},totalCount:(n==null?void 0:n.total_count)||0};return a(o,(f=(m=(c=ee.getConfig().models)==null?void 0:c.ProductSearchResult)==null?void 0:m.transformer)==null?void 0:f.call(m,e))}function le(e){const n=e==null?void 0:e.attributeMetadata;return{sortable:(n==null?void 0:n.sortable)||[],filterableInSearch:(n==null?void 0:n.filterableInSearch)||[]}}const me=e=>{var n,o;return((o=(n=e==null?void 0:e.productSearch)==null?void 0:n.items)==null?void 0:o.reduce((i,r)=>{if(!(r!=null&&r.productView))return i;const l=ne(r.productView);return l&&i.push(l),i},[]))||[]};export{oe as a,le as b,ne as c,me as t};
//# sourceMappingURL=api.js.map
