/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsxs as N,jsx as r}from"@dropins/tools/preact-jsx-runtime.js";import{useState as _,useEffect as R}from"@dropins/tools/preact-compat.js";import{classes as s,VComponent as x,toLanguageTag as D}from"@dropins/tools/lib.js";import"@dropins/tools/components.js";/* empty css             */import{P as L}from"../chunks/PriceRange.js";import"@dropins/tools/preact.js";import{useText as h}from"@dropins/tools/i18n.js";import{events as v}from"@dropins/tools/event-bus.js";import{g as j}from"../chunks/getFetchedProductData.js";import{c as C}from"../chunks/isProductConfigurationValid.js";import"../fragments.js";import"@dropins/tools/fetch-graphql.js";const T=({className:t,price:i,specialPrice:a,children:n,...e})=>{const c=h("PDP.Product.RegularPrice.label").label,o=h("PDP.Product.SpecialPrice.label").label;return N("div",{...e,className:s(["pdp-price",t]),children:[a&&r(x,{node:a,className:s(["pdp-price__amount-special","pdp-price__amount"]),"aria-label":o,role:"text"}),i&&r(x,{node:i,className:s(["pdp-price__amount-regular","pdp-price__amount--grey"]),"aria-label":c,role:"text"})]})},y=({initialData:t=null,children:i,...a})=>{var m,u,d,f,g,P,b;const{defaultLocale:n="en-US"}=C.getConfig(),[e,c]=_(t),[o,S]=_(n);return R(()=>{const l=v.on("pdp/data",c),p=v.on("locale",S);return()=>{l==null||l.off(),p==null||p.off()}},[]),!e||!e.prices?null:r(T,{...a,specialPrice:(m=e.prices)!=null&&m.visible?r(L,{...(u=e.prices)==null?void 0:u.final,locale:D(o)}):void 0,price:(d=e.prices)!=null&&d.visible&&((f=e.prices)!=null&&f.regular)&&((g=e.prices)==null?void 0:g.final.amount)!==((P=e.prices)==null?void 0:P.regular.amount)?r(L,{...(b=e.prices)==null?void 0:b.regular,locale:D(o)}):void 0})};y.getInitialData=j;export{y as ProductPrice,y as default};
//# sourceMappingURL=ProductPrice.js.map
